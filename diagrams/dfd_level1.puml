@startuml Level_1_DFD
' Coffee Shop Level 1 Data Flow Diagram
skinparam defaultFontName "Arial"
skinparam defaultFontSize 14
skinparam dpi 150
skinparam shadowing false
skinparam nodesep 52
skinparam ranksep 64
skinparam actorStyle hollow
skinparam wrapWidth 160
skinparam rectangle {
  BackgroundColor #FEF5E7
  BorderColor #6F4E37
  RoundCorner 10
  BorderThickness 1.1
}
skinparam database {
  BackgroundColor #FFFDF7
  BorderColor #6F4E37
  BorderThickness 1
}
left to right direction

actor "Customer" as Customer
actor "Administrator" as Admin
actor "Payment Gateway" as Payment
actor "Notification Service" as Notifier

database "User\nProfiles" as UserDB
database "Menu\nCatalog" as ProductDB
database "Order\nRecords" as OrderDB
database "Reservation\nLog" as ReservationDB
database "Payment\nLedger" as PaymentDB
database "Support\nTickets" as SupportDB

rectangle "Coffee Shop Information System" as System {
  rectangle "1.1 Manage\nAccounts" as P11
  rectangle "1.2 Provide\nMenu & Cart" as P12
  rectangle "1.3 Fulfill\nOrders & Payment" as P13
  rectangle "1.4 Arrange\nReservations" as P14
  rectangle "1.5 Support &\nNotify" as P15
}

Customer --> P11 : Sign-up /\nLogin
P11 --> Customer : Access status
P11 --> UserDB : Write profiles
UserDB --> P11 : Account data

Customer --> P12 : Browse /\nUpdate cart
P12 --> ProductDB : Menu lookup
ProductDB --> P12 : Menu catalog
P12 --> Customer : Menu & cart view
P12 --> P13 : Checkout request
Admin --> P12 : Catalog updates
P12 --> ProductDB : Maintain catalog

Customer --> P13 : Order details
P13 --> OrderDB : Save order
OrderDB --> P13 : Order status
P13 --> Payment : Payment auth
Payment --> P13 : Auth result
P13 --> PaymentDB : Log payment
P13 --> Customer : Order confirmation
P13 --> P15 : Receipt payload
Admin --> P13 : Fulfillment updates
P13 --> Admin : Order queue

Customer --> P14 : Reservation request
P14 --> ReservationDB : Update bookings
ReservationDB --> P14 : Availability
P14 --> Customer : Reservation confirm
Admin --> P14 : Schedule changes

Customer --> P15 : Support query
P15 --> SupportDB : Ticket update
SupportDB --> P15 : Ticket status
P15 --> Notifier : Customer alerts
Notifier --> Customer : Messages
Notifier --> Admin : Exceptions
Admin --> P15 : Ticket resolution
P15 --> Admin : Escalations

@enduml
